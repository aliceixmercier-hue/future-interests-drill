<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Future Interests Drill</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root {
  --primary:#0a2a66;
  --correct:#1b7f4d;
  --wrong:#b42318;
  --note:#fff6bf;
  --card:#ffffff;
  --bg:#f3f6fb;
}

body {
  margin:0;
  background:var(--bg);
  font-family:system-ui,-apple-system,sans-serif;
}

.card {
  max-width:520px;
  margin:40px auto;
  background:var(--card);
  border-radius:20px;
  padding:28px;
  box-shadow:0 20px 40px rgba(0,0,0,.08);
}

.header {
  text-align:center;
}

.scale {
  font-size:42px;
  margin-bottom:6px;
}

.sub {
  color:#5b6b8b;
  font-size:14px;
}

.topbar {
  display:flex;
  justify-content:space-between;
  margin:14px 0;
  font-size:14px;
}

.prompt {
  background:var(--note);
  padding:18px;
  border-radius:14px;
  font-size:22px;
  font-weight:600;
  margin:18px 0;
}

.answers {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

button.answer {
  padding:14px;
  border-radius:12px;
  border:2px solid #d0d8ea;
  background:white;
  font-size:15px;
  cursor:pointer;
}

button.answer.correct {
  background:var(--correct);
  color:white;
  border-color:var(--correct);
}

button.answer.wrong {
  background:var(--wrong);
  color:white;
  border-color:var(--wrong);
}

.feedback {
  margin-top:18px;
  padding:16px;
  border-radius:12px;
  background:#fdeeee;
  border-left:6px solid var(--wrong);
  font-size:14px;
}

.feedback.correct {
  background:#e9f7ef;
  border-left-color:var(--correct);
}

.next {
  margin-top:18px;
  width:100%;
  padding:16px;
  background:var(--primary);
  color:white;
  border:none;
  border-radius:14px;
  font-size:16px;
  cursor:pointer;
}

.hidden { display:none; }
</style>
</head>

<body>
<div class="card">

  <div class="header">
    <div class="scale">‚öñÔ∏è</div>
    <div class="sub">Future Interests Drill</div>
  </div>

  <div class="topbar">
    <div>üî• <span id="streak">0</span></div>
    <div>‚úì <span id="correct">0</span> ‚úó <span id="wrong">0</span> ‚è± <span id="time">0.0</span>s</div>
  </div>

  <label><input type="checkbox" id="speed"> Speed Mode (5s)</label>
  <label style="margin-left:12px;"><input type="checkbox" id="exam"> Exam Mode</label>

  <div class="prompt" id="prompt"></div>

  <div class="answers" id="answers"></div>

  <div class="feedback hidden" id="feedback"></div>

  <button class="next" id="next">Next Question</button>
</div>

<script>
/* ---------- QUESTION BANK (IMMUTABLE) ---------- */
const QUESTIONS = [
{
  text:"To Bob for life, then to Charlie.",
  correct:"Vested Remainder",
  explainCorrect:"Charlie is ascertained and no condition precedent applies.",
  explainWrong:{
    "Contingent Remainder":"No condition precedent delays vesting.",
    "Executory Interest":"There is no divestment of another estate.",
    "Reversion":"The interest is not retained by the grantor."
  }
},
{
  text:"To Alice for life, then to Bob if Bob survives Alice.",
  correct:"Contingent Remainder",
  explainCorrect:"Bob‚Äôs interest depends on a condition precedent: survival.",
  explainWrong:{
    "Vested Remainder":"Vesting is contingent on survival.",
    "Executory Interest":"No divestment of a prior vested estate.",
    "Reversion":"The grantor does not retain the future interest."
  }
},
{
  text:"To Dana, but if alcohol is ever sold, then to Evan.",
  correct:"Executory Interest",
  explainCorrect:"Evan divests Dana upon occurrence of a condition.",
  explainWrong:{
    "Vested Remainder":"Does not wait patiently after natural termination.",
    "Contingent Remainder":"Does not follow a life estate.",
    "Reversion":"Interest is granted to a third party."
  }
},
{
  text:"To Frank for life.",
  correct:"Reversion",
  explainCorrect:"The grantor retains the future interest.",
  explainWrong:{
    "Vested Remainder":"No remainder is created.",
    "Contingent Remainder":"No remainder follows the life estate.",
    "Executory Interest":"No divesting condition applies."
  }
}
];

/* ---------- STATE ---------- */
let index = 0;
let streak = 0;
let correct = 0;
let wrong = 0;
let startTime = 0;
let locked = false;

/* ---------- DOM ---------- */
const promptEl = document.getElementById("prompt");
const answersEl = document.getElementById("answers");
const feedbackEl = document.getElementById("feedback");
const streakEl = document.getElementById("streak");
const correctEl = document.getElementById("correct");
const wrongEl = document.getElementById("wrong");
const timeEl = document.getElementById("time");

/* ---------- FUNCTIONS ---------- */
function loadQuestion() {
  locked = false;
  feedbackEl.classList.add("hidden");
  answersEl.innerHTML = "";

  const q = QUESTIONS[index % QUESTIONS.length];
  promptEl.textContent = q.text;
  startTime = performance.now();

  ["Vested Remainder","Contingent Remainder","Executory Interest","Reversion"]
    .forEach(opt=>{
      const b=document.createElement("button");
      b.className="answer";
      b.textContent=opt;
      b.onclick=()=>select(opt,b);
      answersEl.appendChild(b);
    });
}

function select(choice, btn) {
  if (locked) return;
  locked = true;

  const q = QUESTIONS[index % QUESTIONS.length];
  const elapsed = ((performance.now()-startTime)/1000).toFixed(1);
  timeEl.textContent = elapsed;

  document.querySelectorAll(".answer").forEach(b=>{
    if (b.textContent===q.correct) b.classList.add("correct");
    if (b.textContent===choice && choice!==q.correct) b.classList.add("wrong");
  });

  let html="";
  if (choice===q.correct) {
    streak++; correct++;
    feedbackEl.className="feedback correct";
    html += "<b>Correct.</b><br>";
  } else {
    streak=0; wrong++;
    feedbackEl.className="feedback";
    html += "<b>Incorrect.</b><br>";
  }

  html += `<b>Why correct:</b> ${q.explainCorrect}<br><br><b>Why not the others:</b><ul>`;
  for (const [k,v] of Object.entries(q.explainWrong)) {
    html += `<li><i>${k}</i>: ${v}</li>`;
  }
  html += `</ul>Answered in ${elapsed}s`;

  feedbackEl.innerHTML = html;
  feedbackEl.classList.remove("hidden");

  streakEl.textContent=streak;
  correctEl.textContent=correct;
  wrongEl.textContent=wrong;
}

document.getElementById("next").onclick=()=>{
  index++;
  loadQuestion();
};

/* ---------- INIT ---------- */
loadQuestion();
</script>
</body>
</html>
